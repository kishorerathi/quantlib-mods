
class Fixing : public Event {
  private:
    boost::shared_ptr<FloatingRateCoupon> coupon_;
  public:
    ... // constructor
    Date date() const { return coupon_->fixingDate(); }
    boost::shared_ptr<FloatingRateCoupon> coupon() const;
};


class Instrument {
  public:
    ...
    std::list<boost::shared_ptr<Event> > events(const Date&) const;
};



======= TODO ===============

---
GENERAL
- restore floating exception in test-suite
- introduce type QuantLib::Money
- wiki documentation
- automated build system
- adopt boost::date
- use boost property map in OH
- have VBA code in text files

---
NANDO
- testMultiStepCoterminalSwapsAndSwaptions failure
- Higham covariance bug + review rank rduction
- use Handle in SwaptionVolCubeChecks
- create relinkableHandle, then in ControlPanel only use linkTo
- Instruments subfolder
- termstructures/volatilities subfolders
- null strike -> atm strike
- vol term structure refactoring
- joint calendar
- mkt convention struct
- YCDemo crash
- alternative calibrations with null rho
- make BlackCalculator observer/observable, make it lazy
- Risk, Wilmott papers (REMIND: VERIFICARE COPIE DISPERSE)
- period algebra
- review dei seguenti workbooks: YC_SwapDemo.xls, IndexMethodsEnumOrObj.xls
- refactor abcd vol file, adding more unary_functions for blackVol and covariance
- implement abcdinterpolation
- Higham covariance bug + review rank reduction

---
K
STAND-BY
- Citrix access -> richiesta licenza non è per installazione
	ma per connessioniconcorrenti --> Eugenia in ferie    (Marco and K)
- Citrix performance: verifica tempi di ricalcolo del foglio cw.xls in real time su Citrix

- make capVolStructure.xml equivalent to SwaptionVolStructure.xml (0.5d/0.5d DONE)
- trimestrale (0/0.5d)
- market models:
	implement longTermCorr+beta+gamma correlation structure (?)
	abcd for displaced vols (Chiara, Cristina, K) (?)
- 3M cap stripper: 	(0/3w)
	review triggers in wkbs (0.5D/0.5D done)
	overview: focus on smile sections
	sensitivity to market data
	gestione manuale ordinaria (con Clerici)
	prendere possesso foglio Clerici
	reintroduzione in 6M cap stripper
	test wbk: abcd fit
    	atm backbone: CapStripper3MTestSmoothness.xls
- 6M cap stripper: (1.5D/1w)
	atm backbone: CapStripper6MTestSmoothness.xls (0.5D/0.5D done)
	testa la smoothness della dorsale ATM con l'interpolazione lineare (0.5D/0.5D done)
	CapStripper6MTestRepricing.xls: aggiungi (0.5D/0.5D done)
	decidere se usare le interpolated vols da usare nel cap stripper
- coveredWarrants.xls (1D/1w)
	- DONE check real time is OK -> 7 secs per recalc
	- DONE gestione del primo periodo corto
	- DONE qlMakeCapFloor() -> funziona solo per forward-start
	- DONE punta a decorated objects
	- testing on Citrix
- Sensitivity Analysis: (0/5w)
	applied to cms book
	create new .xls with NPVs of 4 cms books
	test newly released version
- bug in function SetRealTime() -> Rt seems not to switch settings
- manage auto-open macro problem -> propose:
	add Workbook_Open() in ThisWorkbook
	add auto_open() in Module
- DONE macro "GlobalMktCalibration" -> non deve aprire il ManualCalibrationFeed.xls
- migliora la macro "Copy Values" in SingleMeanReversion.xls
- rimuovere Singleton and set YTS to Euribor
- foglio di clerici (interpolazione)
- manual feeds: CalibrationParametersFeed partially updated to live/overwrite logic

---
CRISTINA
- CMS calibration tests (Cristina and K)                                (1D/1D DONE)
- EOD valuation: completare analisi dei nuovi deal                      (0.5D/0.5D - DONE)
  (except the digital option: qlCmsZeroLeg doesn't work)
- debug qlCmsZeroLeg                                                    (0.5D/0.5D - DONE)
- testing that the manual procedure to set back/forward the evaluation
  date returns the same results of the automatic procedure              (0D/1D)
- new management of additional cashflows in Irs Cms book                (1D/1D - DONE)
- Cap Cms Book:
  - pricing of Cms Cap without decomposition in Excel                   (To be discussed)
  - new management of additional cashflows in Cap Cms book              (0D/1D - STAND-BY)
- digital coupon in call spread, add unit test
  (Marco, Giorgio and Cristina)                                         (1D/2D)
- install VS in new pc                                                  (0D/1D)
- sensitivity analysis                                                  (STAND-BY)
- market models: abcd for displaced vols (Chiara, Cristina, K)
- fixing days in cashflow analisys					(0D/0.5D)
---
CHIARA
D add tests for CMS asset swap in the test suite (1d|1d|Done)
D create new type for Quantlib Eur obsolete currencies (0.5d|0.5d|Done)
- Z-spread function, for zero coupon bond valuation (2d|10dd|WIP)
 *lehman's documentation
 *created new workbook to replicate market practice (YAF, YAS on BBG) use of z-spread
- last cpn date and next cpn date as a method of schedule
- fix bug concerning the esposition to excel of fixing days in cashflows analysis (with nando)
- bonds' workbooks integration with K+/Gatemate
- Digital Bond contructor
- Multicallable bond constructor
- review bond equivalent fo Reverse FRN
- implement alternative version of bond instrument which should accept a leg object
- fare tutti i metodi dei bond restituiscano un InterestRate
- i ThMethod perche' non accettano anche loro una Date settlementDate = Date()?
- market models: abcd for displaced vols (Chiara, Cristina, K)

---
FRANCOIS
- investigate "root not bracketed" error message in cms calibration as in
  X:\Offices\Financial Engineering\Derivatives Modelling\Projects\QuantLib\CMS\MarketDataHistory\WorkbooksQl_FailRootBracketedNewtonSolver.zip
- OH Wizard review: vector input, change in XML file structure to implement default values (to be precised)
- MM: different correlation structures (Rapisarda, Schoenmakers and Coffey)(2.5D/2D-5D)
- integration framework refactoring (1.5D/2D)
- conundrum pricer optimization (1D/2D)
- notification chains pb (1D/3D)
- smile sections:
	- remove calibration from constructor(1H)
	- use Levenberg optimizator(to be precised)
	- move vol quotes from constructor(to be precised)
- add SABR interpolation to the capstripper(to be precised)
- refactor the method class (move Endcriteria as argument of the minimize) (done)
- OH Wizard performance issue when the control panel is left opened(to be precised)
- To BE REVIEWED test abcd calibration
- TO BE REVIEWED consolidate all multisteps in a single test
- TO BE REVIEWED MultiStepSwaption
- check sabr fit stability/accuracy for smilesections (.5D)
- add atmRate to SmileSection base class (to be discussed)
- review workbooks: SmileSectionCaps.xls, SimpleQuote.xls, DerivedQuotes.xls, CapStripperTest3M.xls. (to be precised)

---
GIORGIO
- test Levenberg-Marquardt in sabr interpolation  (0d/5d)
- test Levenberg-Marquardt in abcd vol (0d/5d)
D rename correctly Excel names of class qlSimultaneousCalibration() (1d/1d DONE)
D fixed sabr parameters (1d/1d DONE)
D adeguare RangeAccrual coupon alla gerarchia di Floating Rate coupon (1d/1d DONE)
- WIP: digital coupon in call spread, add unit test (Marco, Giorgio and Cristina)	(7d  - ratio: 0.7)
D flat extrapolation of SABR parameters in vol cube (2d/2d DONE)
- WIP ratchet Instrument C++ (shared with Marco)					(7d  - ratio: 0.5)
- WIP range accrual coupon (con relativi test)						(30d - ratio: 0.6)
  - create a workbook for range accrual under Workbooks\InterestRateDerivatives designing the workbook as done for CMS.xls
  - add unit test for range accrual (lowerB=0 and upperB=100->Floater, decreasing upperB, increasing lowerB)
  - refactorize range accrual pricer after having completed unit tests
- spreaded swaption vol structure							(5d  - ratio: 0.0)
- spreaded caplet vol structure								(5d  - ratio: 0.0)
- install VS in new pc

---
MARCO
- Citrix:  (0.0/0.5d)
  - verifica licenze accesso
  - verifica accesso a $+
- verifica ottimizzatori:
  - complete test suite with Giorgio) (0.0/2d)
  - fix conjugate gradient and steepest descent (with FR) (0.0/2d)
  - check with GSL (with FR) (0.0/2d)
  - TBD: export to excel and build testing wkb (to be planned)
- MM: corr hist extimation (after 4/5/2007)						(duration: 2w? - end: ??? - ratio: 0.0 - status: not started)
- pricing plain vanilla legs in BGM book (with Marco/Giorgio/Cristina)	(0.0/2d/WAITING FOR DIGITAL OPTIONS)
- Risk, Wilmott papers(0.0/1d/WAITING for Ferdinando)
- update bootstrapping algorithm to catch up changes in Mx curve (67%,/3d/DONE)
  - introduce enumeration for Depos inclusion
  - move selection of instruments from RateHelperSelection into spreadsheets with Nando)
- Inflation project:
  - Attività UAT (0.5/4w)
  - Programmazione prossime attività (0.0/2w?)

========================

Eric
- 2 DOF projects
- coerce from Frequency to Period
- coerce from Period->Date to double/int
- coerce from IMMcode to date
- imm functions (dates.xml) problems
- launcher addin dir ?
- remove quantlibxl-bin.nsi
- merge quantlibxl.nsi and quantlib-network.nsi
- in the nsi generalize the location of the xml files
- log defaults
- launcher issues
- oh.chm
- review native ohSplit on vector input to coerce from string to vector
- why the error message doesn't disappear as soon as the cell is not in error anymore
- ohConcatenate, ohRange1D, ohRange2D
- command (remove function SetEvaluationDate, etc?)
- watch on
- SA
- InterestRateQuoteFeed.xls: Auto_Open problem
- discount factors output is not col/row enabled
- esporre ad excel i metodi commentati in payoff.xml
- visitor pattern per 3rd parameter dei payoff
- RtUpdate like approach for effective Quote, in order to avoid setting the same quote
- Handle coercion to SwaptionVolDiscrete
- freeze, unfreeze objects


QuantLib
- Cashflows::iborSpread function
- clean up index fixing calendar
- cash rebate è multistep?
- aggiungere Forward all'enumeration Call/Put
- fix convertible faceamount bug
- deprecate swaptionvol time interface
- corregere OneAssetOption impliedVol
- SWAP implement fair rate for floating/fixed rate vector
- use boost random number generators
- Volatility assume a daycounter in the same way as rate (see InterestRate)
- ForwardSpreadedCurve con spread term structure
- throw first what in notifyobservers
- Instrument<Args>
- Inherit Exercise from Event?
- use strategy pattern for simulation termination criteria
- se possibile rispettare la misura ProductSuggested nel Composite

QuantLib RATEHELPERS
- earliest days dovrebbe tener conto dei fixing days

QuantLib PIECEWISEYIELDCURVE
- FRARateHelper deve avere dentro in FRA Instrument
- turn of year
- extended grid with all relevant dates
- revise bondhelpers
- bootstrap ForwardSpreadedYieldCurve

LUIGI
- debug vari crash in test suite per floating point exception
- risolvere Halley improvements
- InterpolatedYieldTermStructure<Discount,LogLinear>
- InterpolatedYieldTermStructure<Discount,LogLinear> constructor using an input
  discount grid
- InterpolatedYieldTermStructure<Discount,LogLinear>::gridDates()
- generic ForwardSpreadedYieldCurve (spread term structure)
- bootstrap ForwardSpreadedYieldCurve using its own ratehelpers and a base curve

QUANTLIBADDIN
- RSG factory
- export ImpliedCurve
- export PathGeneration
- SWAP GRID
- VANILLA SWAP signature
- export discount, loglinear selection
- use QL folder structure
- port old QuantLibXL functionalities

QUANTLIBXL WORKBOOKS
- nel ControlPanel dare evidenza dei feed: CMS
- Property example?
- SWAPTION spreadsheet with multiple prices
- all spreadsheets with grid prices
- merge old QuantLibXL functions
- more calendar drop down cell menu
- YYYYDDMM_HHMM timestamp in log file name doesn't work the second time
- file name cannot be changed without time

QUANTLIBXL VBA
